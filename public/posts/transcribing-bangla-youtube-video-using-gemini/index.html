<!DOCTYPE html>
<html lang="en">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Transcribing Bangla Youtube Video With Gemini - AI With Shoaib</title><meta name="Description" content="An end to end guide to transcribe bangla youtube video using gemini flash 2"><meta property="og:url" content="http://localhost:1313/posts/transcribing-bangla-youtube-video-using-gemini/">
  <meta property="og:site_name" content="AI With Shoaib">
  <meta property="og:title" content="Transcribing Bangla Youtube Video With Gemini">
  <meta property="og:description" content="An end to end guide to transcribe bangla youtube video using gemini flash 2">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-03-01T05:43:40+06:00">
    <meta property="article:modified_time" content="2025-03-01T05:43:40+06:00">
    <meta property="article:tag" content="STT">
    <meta property="article:tag" content="LLM">
    <meta property="og:image" content="http://localhost:1313/images/DeepLearning/Chapter1/Deep-Learning-thumbnail-SocialPreview.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://localhost:1313/images/DeepLearning/Chapter1/Deep-Learning-thumbnail-SocialPreview.png">
  <meta name="twitter:title" content="Transcribing Bangla Youtube Video With Gemini">
  <meta name="twitter:description" content="An end to end guide to transcribe bangla youtube video using gemini flash 2">
      <meta name="twitter:site" content="@KillerShoaib__">
<meta name="application-name" content="AI With Shoaib ">
<meta name="apple-mobile-web-app-title" content="AI With Shoaib "><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://localhost:1313/posts/transcribing-bangla-youtube-video-using-gemini/" /><link rel="prev" href="http://localhost:1313/posts/deeplearning/chapter2/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/lib/fontawesome-free/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/lib/animate/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Transcribing Bangla Youtube Video With Gemini",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/localhost:1313\/posts\/transcribing-bangla-youtube-video-using-gemini\/"
        },"genre": "posts","keywords": "STT, LLM","wordcount":  4142 ,
        "url": "http:\/\/localhost:1313\/posts\/transcribing-bangla-youtube-video-using-gemini\/","datePublished": "2025-03-01T05:43:40+06:00","dateModified": "2025-03-01T05:43:40+06:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "Shoaib Hossain"
            },"description": "An end to end guide to transcribe bangla youtube video using gemini flash 2"
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('dark' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'dark' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="AI With Shoaib"><span class="header-title-pre"><i class="fa-solid fa-robot"></i></span> AI With Shoaib </a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/categories/"> Categories </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/deep-learning/"> Deep Learning </a><a class="menu-item" href="/about/"> About </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a><a href="javascript:void(0);" class="menu-item language" title="Select Language">
                    <i class="fa fa-globe" aria-hidden="true"></i>                      
                    <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/posts/transcribing-bangla-youtube-video-using-gemini/" selected>English</option></select>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="AI With Shoaib"><span class="header-title-pre"><i class="fa-solid fa-robot"></i></span> AI With Shoaib </a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/categories/" title="">Categories</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/deep-learning/" title="">Deep Learning</a><a class="menu-item" href="/about/" title="">About</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="Select Language">
                    <i class="fa fa-globe fa-fw" aria-hidden="true"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/posts/transcribing-bangla-youtube-video-using-gemini/" selected>English</option></select>
                </a></div>
    </div>
</header><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content always-active" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Transcribing Bangla Youtube Video With Gemini</h1><h2 class="single-subtitle">An end to end guide to transcribe bangla youtube video using gemini flash 2</h2><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Shoaib Hossain</a></span>&nbsp;<span class="post-category">included in <a href="/categories/standalone-project/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>Standalone Project</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2025-03-01">2025-03-01</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;4142 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;20 minutes&nbsp;</div>
        </div><div class="featured-image"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/YoutubeTranscriptionGemini/Bangla%20Youtube%20Video%20Transcription%20Banner.png"
        data-srcset="/images/YoutubeTranscriptionGemini/Bangla%20Youtube%20Video%20Transcription%20Banner.png, /images/YoutubeTranscriptionGemini/Bangla%20Youtube%20Video%20Transcription%20Banner.png 1.5x, /images/YoutubeTranscriptionGemini/Bangla%20Youtube%20Video%20Transcription%20Banner.png 2x"
        data-sizes="auto"
        alt="/images/YoutubeTranscriptionGemini/Bangla Youtube Video Transcription Banner.png"
        title="An end to end guide to transcribe bangla youtube video using gemini flash 2" /></div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#why-build-this">Why Build This?</a></li>
    <li><a href="#what-were-building--what-to-expect">What We&rsquo;re Building &amp; What to Expect?</a></li>
    <li><a href="#how-to-get-gemini-api-key">How to get Gemini API Key?</a></li>
    <li><a href="#illustration-of-the-complete-workflow">Illustration of The Complete Workflow</a>
      <ul>
        <li><a href="#youtube-audio-download-phase-1">Youtube Audio Download (Phase 1)</a></li>
        <li><a href="#transcription-phase-2">Transcription (Phase 2)</a></li>
      </ul>
    </li>
    <li><a href="#automating-youtube-audio-download">Automating Youtube Audio Download</a>
      <ul>
        <li><a href="#manually-copying-all-playlist-urls">Manually Copying All Playlist Urls</a></li>
        <li><a href="#getting-all-video-urls">Getting All Video Urls</a></li>
        <li><a href="#downloading-all-the-videos-from-url">Downloading All The Videos from url</a></li>
        <li><a href="#now-lets-talk-about-automation-issues-ive-faced">Now Let&rsquo;s Talk About Automation Issues I&rsquo;ve Faced</a></li>
        <li><a href="#things-to-consider">Things to Consider</a></li>
      </ul>
    </li>
    <li><a href="#creating-the-transcription-pipeline">Creating the Transcription Pipeline</a>
      <ul>
        <li><a href="#why-choose-evil-google">Why Choose Evil Google</a></li>
        <li><a href="#generating-the-transcription">Generating The Transcription</a></li>
      </ul>
    </li>
    <li><a href="#future-work">Future work</a></li>
    <li><a href="#gratitude">Gratitude</a></li>
    <li><a href="#my-next-blog">My Next Blog</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>Let&rsquo;s build a <strong>Bangla Youtube Transcriber</strong> using Google&rsquo;s new <strong>Gemini Flash 2.</strong></p>
<h2 id="why-build-this">Why Build This?</h2>
<p>I&rsquo;m working as a professional AI engineer in a startup company. Where We&rsquo;re building customer support system using Gen AI technologies. We&rsquo;re facing problem to find out good Bangla open source LLM. I wouldn&rsquo;t bored you with all the details why I&rsquo;m doing this but it comes down to mainly one thing, which is <strong>contributing to open source Bangla AI community.</strong> I want to create a domino effect or inspire other so that other can use this project or some thing else to contribute to <strong>Bangla AI community</strong> and eventually we start to have or atleast have some decent resources and datasets for Bangla LLM.</p>
<p><strong>And, I do think this project is cool or interesting to me. So, yeah this is another reason</strong></p>
<h2 id="what-were-building--what-to-expect">What We&rsquo;re Building &amp; What to Expect?</h2>
<p>I think you can already guessed from the name of it, we&rsquo;re building <strong>Bangla Youtube Transcriber</strong>. It&rsquo;ll basically create a dataset containing the transcribed text from the YouTube audio. Well, I&rsquo;ll be honest I can&rsquo;t transcribe whole Bangla videos that are present in YouTube. For this project I&rsquo;ve chosen <strong>Rakibul Hasan&rsquo;s</strong> Youtube channel. I&rsquo;ve transcribed approximately 60% of his entire youtube channel. &ldquo;Why 60%?&rdquo; you may ask. Well the thing is that YouTube is stubborn and it was blocking my automation script that&rsquo;s why I couldn&rsquo;t able to download all the audios. After getting the audios we use <strong>Gemini Flash 2.0</strong> to trancribe each of the audio into text.</p>
<p>In this blog I&rsquo;ll show you my thought process and how I&rsquo;ve build this. But this is <strong>not going to be line by line code explanation.</strong> I&rsquo;ll show the overall concept and details so that you can reproduce or build something similar to this. But for the entire code you can check out the <a href="https://github.com/KillerShoaib/BanglaYoutubeTranscribe" target="_blank" rel="noopener noreffer "><strong>github repo</strong></a></p>
<h2 id="how-to-get-gemini-api-key">How to get Gemini API Key?</h2>
<p>Since, we&rsquo;re going to use <code>Gemini Flash 2.0</code> we need to have <code>Google API key</code>. Don&rsquo;t worry google is generous. They are giving <strong>1,500 API request per day for</strong> free without any credit card. All you need to have is google account. Everyone have google account (If you don&rsquo;t then please for the love of god stop living under a rock).</p>
<p><strong>Step 1.</strong>
Go to <a href="https://aistudio.google.com/" target="_blank" rel="noopener noreffer "><strong>Google AI Studio</strong></a> and login if you&rsquo;ve not done it already.</p>
<p><strong>Step 2.</strong>
Click on the <code>Get Api Key</code> button just shown below.</p>
<figure><a class="lightgallery" href="/images/YoutubeTranscriptionGemini/API_ss1.png" title="/images/YoutubeTranscriptionGemini/API_ss1.png" data-thumbnail="/images/YoutubeTranscriptionGemini/API_ss1.png" data-sub-html="<h2>Click on Get Api Key</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/images/YoutubeTranscriptionGemini/API_ss1.png"
            data-srcset="/images/YoutubeTranscriptionGemini/API_ss1.png, /images/YoutubeTranscriptionGemini/API_ss1.png 1.5x, /images/YoutubeTranscriptionGemini/API_ss1.png 2x"
            data-sizes="auto"
            alt="/images/YoutubeTranscriptionGemini/API_ss1.png" />
    </a><figcaption class="image-caption"><strong>Click on <code>Get Api Key</code></strong></figcaption>
    </figure>
<p><strong>Step 3.</strong>
After that click on the <code>Create Api key</code> button.</p>
<figure><a class="lightgallery" href="/images/YoutubeTranscriptionGemini/API_ss2.png" title="/images/YoutubeTranscriptionGemini/API_ss2.png" data-thumbnail="/images/YoutubeTranscriptionGemini/API_ss2.png" data-sub-html="<h2>Click on Create Api key</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/images/YoutubeTranscriptionGemini/API_ss2.png"
            data-srcset="/images/YoutubeTranscriptionGemini/API_ss2.png, /images/YoutubeTranscriptionGemini/API_ss2.png 1.5x, /images/YoutubeTranscriptionGemini/API_ss2.png 2x"
            data-sizes="auto"
            alt="/images/YoutubeTranscriptionGemini/API_ss2.png" />
    </a><figcaption class="image-caption"><strong>Click on <code>Create Api key</code></strong></figcaption>
    </figure>
<p><strong>Step 4.</strong>
Finally, copy the API key and save it somewhere else we&rsquo;ll be using it later.</p>
<figure><a class="lightgallery" href="/images/YoutubeTranscriptionGemini/API_ss3.png" title="/images/YoutubeTranscriptionGemini/API_ss3.png" data-thumbnail="/images/YoutubeTranscriptionGemini/API_ss3.png" data-sub-html="<h2>Copy the API key</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/images/YoutubeTranscriptionGemini/API_ss3.png"
            data-srcset="/images/YoutubeTranscriptionGemini/API_ss3.png, /images/YoutubeTranscriptionGemini/API_ss3.png 1.5x, /images/YoutubeTranscriptionGemini/API_ss3.png 2x"
            data-sizes="auto"
            alt="/images/YoutubeTranscriptionGemini/API_ss3.png" />
    </a><figcaption class="image-caption"><strong>Copy the API key</strong></figcaption>
    </figure>
<p><strong>That&rsquo;s it! We&rsquo;re all set to begin our journey.</strong></p>
<h2 id="illustration-of-the-complete-workflow">Illustration of The Complete Workflow</h2>
<p>Here, I&rsquo;ll be showing you the abstract level illustration of the complete workflow. Which will give you a better picture how this project is going to be.</p>
<p>First I&rsquo;ve divided this entire task into <strong>2 diffrent phases.</strong></p>
<ol>
<li><strong>Phase 1:</strong> Downloading the youtube audios</li>
<li><strong>Phase 2:</strong> Generating the transcription</li>
</ol>
<p>Let&rsquo;s start with <strong>Phase 1</strong>.</p>
<h3 id="youtube-audio-download-phase-1">Youtube Audio Download (Phase 1)</h3>
<figure><a class="lightgallery" href="/images/YoutubeTranscriptionGemini/Blog_diagram_1_youtube_pipeline_arc.png" title="/images/YoutubeTranscriptionGemini/Blog_diagram_1_youtube_pipeline_arc.png" data-thumbnail="/images/YoutubeTranscriptionGemini/Blog_diagram_1_youtube_pipeline_arc.png" data-sub-html="<h2>Phase 1 (Youtube Audio Download)</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/images/YoutubeTranscriptionGemini/Blog_diagram_1_youtube_pipeline_arc.png"
            data-srcset="/images/YoutubeTranscriptionGemini/Blog_diagram_1_youtube_pipeline_arc.png, /images/YoutubeTranscriptionGemini/Blog_diagram_1_youtube_pipeline_arc.png 1.5x, /images/YoutubeTranscriptionGemini/Blog_diagram_1_youtube_pipeline_arc.png 2x"
            data-sizes="auto"
            alt="/images/YoutubeTranscriptionGemini/Blog_diagram_1_youtube_pipeline_arc.png" />
    </a><figcaption class="image-caption"><strong>Phase 1 (Youtube Audio Download)</strong></figcaption>
    </figure>
<h4 id="step-1-save-all-the-playlist-urls-in-a-python-file-as-list">Step 1. Save all the playlist urls in a python file as <code>list</code></h4>
<p>In this step, I&rsquo;ve gone through all the playlists from <strong>Rakibl Hasan&rsquo;s</strong> youtube channel and gathered all the <code>playlist</code> url links and manually save them in a python file as <code>list</code>. <strong>&ldquo;Why did I do this manually?&rdquo;</strong> you may ask. Well, the thing is there weren&rsquo;t lots of playlist in his channel. So doing it manually didn&rsquo;t take too much time.</p>
<h4 id="step-2-get-all-video-links--save-them-into-a-json-file">Step 2. Get all video links &amp; save them into a <code>json</code> file</h4>
<p>Since I&rsquo;ve already gathered all the <strong>playlists</strong> url then the next step is to iterate over all the playlists and get all the video links from each playlist. To do this I&rsquo;ve used <code>pytube</code> a python library which helps to automate many things related to youtube. After getting all the <strong>video urls</strong> then I&rsquo;ve saved them into a <code>json</code> file where the <code>key</code> is the <code>playlist</code> name and the <code>value</code> is the list of <code>video urls</code>.</p>
<h4 id="step-3-download-all-the-audios">Step 3. Download all the audios</h4>
<p>Now we&rsquo;ve not only all the playlist url but also all the video urls. <strong>&ldquo;But, Shoaib WHY DID YOU GATHER ALL OF THESE URLS?&rdquo;</strong>. Okay okay don&rsquo;t start screaming at me I&rsquo;m telling you. All of this urls are necessary to download the audios from the Youtube video. Remember <code>pytube</code>? This library can directly download audio from any youtube video directly. All we need to do is give that particular youtube video url.</p>
<p>We&rsquo;ve gathered all the <strong>video urls</strong>. Now all we need to do is create a python automation script which will download all the audios from the youtube video. This is exactly what I&rsquo;ve done in this step. I&rsquo;ll be going to explain the <code>automation script</code> part in the coding section.</p>
<h4 id="step-4-save-all-the-audios-in-a-folder">Step 4. Save all the audios in a folder</h4>
<p>After downloading all the audios I need to save them in a strcture folder structure so that I can access them later. See the below folder structure</p>
<pre tabindex="0"><code>└── Audio/
    ├── Playlist_name1/
    │   ├── video_name1.mp3
    │   └── video_name2.mp3
    └── Playlist2/
        ├── video_name1.mp3
        └── video_name2.mp3
</code></pre><p>In the above you can see all the audio had been saved to <code>Audio</code> folder. Now inside that audio folder it contains all the <code>playlist</code> folders. Each <code>playlist</code> folder is named after the <strong>Youtube playlist</strong> name. Inside each <code>playlist</code> folder we have <code>audio</code> files and each of the <code>audio</code> files is named after the <strong>Youtube video</strong> name.</p>
<p>And that&rsquo;s it. That was the end of the <strong>Phase 1</strong>. Now you can take a 5 min break my soldier. Only 5 min, do not make it a 50 min fb scrolling session.</p>
<p>Okay, break time is over now start the <strong>Phase 2</strong>.</p>
<h3 id="transcription-phase-2">Transcription (Phase 2)</h3>
<figure><a class="lightgallery" href="/images/YoutubeTranscriptionGemini/Blog_diagram_2_transcription_pipeline_arc.png" title="/images/YoutubeTranscriptionGemini/Blog_diagram_2_transcription_pipeline_arc.png" data-thumbnail="/images/YoutubeTranscriptionGemini/Blog_diagram_2_transcription_pipeline_arc.png" data-sub-html="<h2>Phase 2 (Transcription)</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/images/YoutubeTranscriptionGemini/Blog_diagram_2_transcription_pipeline_arc.png"
            data-srcset="/images/YoutubeTranscriptionGemini/Blog_diagram_2_transcription_pipeline_arc.png, /images/YoutubeTranscriptionGemini/Blog_diagram_2_transcription_pipeline_arc.png 1.5x, /images/YoutubeTranscriptionGemini/Blog_diagram_2_transcription_pipeline_arc.png 2x"
            data-sizes="auto"
            alt="/images/YoutubeTranscriptionGemini/Blog_diagram_2_transcription_pipeline_arc.png" />
    </a><figcaption class="image-caption"><strong>Phase 2 (Transcription)</strong></figcaption>
    </figure>
<h4 id="step-1-playlist--video-name-json-file">Step 1. Playlist &amp; Video Name Json File</h4>
<p>This step proved that I&rsquo;m stupid. Cause this should&rsquo;ve been done in the previous phase while automating the <code>url</code> links. You see after I completed the previous phase then I realized that I didn&rsquo;t track which video belongs to which playlist. I&rsquo;ve <strong>Youtube url</strong> of each video. But don&rsquo;t have the name. That&rsquo;s why in this step I&rsquo;ve created another <code>json</code> file containing the <code>playlist</code> name as key and all the <code>video names</code> in a <code>list</code> as value. Luckily I had saved all the audio in tree like strucutre in the previous step therefore all I had to do is go through the <code>Audio</code> folder and save the <code>playlist</code> name and <code>video name</code> in the <code>json</code> file.</p>
<p>The main purpose of creating this <code>json</code> file is that it&rsquo;ll be used to load the audio (I know there is a better way of doing this, stop judging me, I&rsquo;ve already told you I&rsquo;m stupid).</p>
<h4 id="step-2-load-audio">Step 2. Load Audio</h4>
<p>In this step I load the <code>json</code> file which was created in the above step. Then I loop over all the <code>playlist</code> and <code>video</code> names and load the audio file. But one thing to note here is that <strong>it is an iterative process</strong>. Means I&rsquo;m not loading all the audio files at once. Loading them all at once will cause memory issues. So, I&rsquo;ve loaded the audio file one by one and then do the below steps and after saving trnascription I&rsquo;ll repeat the same process for the next audio file.</p>
<h4 id="step-3-prompting">Step 3. Prompting</h4>
<p>This is where I do the prompting. Since <code>Gemini Flash 2.0</code> is a <strong>multimodal</strong> model. It can take <strong>text</strong> as well as <strong>audio</strong> as input. I&rsquo;m passing the audio file along side some instructions in the prompt so that it can generate the transcription. I&rsquo;ll show the detail prompt in the <strong>coding section.</strong> Beside prompting, there was another configuration that I&rsquo;ve done. I&rsquo;m using <strong>Structure Output</strong> from the model. Means the output return by the model will be in a <code>json</code> format.</p>
<h4 id="step-4-calling-gemini-flash-20">Step 4. Calling Gemini Flash 2.0</h4>
<p>After prompting we use our api key to call <code>Gemini Flash 2.0</code> and generate the transcription.</p>
<h4 id="step-5-structure-output-response">Step 5. Structure Output Response</h4>
<p>After calling the api we get the Structure <code>json</code> response. Now the question is why use structure output? This can be answered from many different prespective. But, for our usecase suppose when we prompt the model to generate the transcription and it returns the response but also add additional text such as &ldquo;I&rsquo;ll start transcribing the audio now&rdquo; or &ldquo;I&rsquo;ll start processing the audio now&rdquo;. Now this is a pain in the ___ (fill in the blank). We need only the transcription text anything else is going to mess up the transcription process. Yes, in theory we can prompt the model to return only the transcription text. But, there is still high possibility that the model will return some additional text. So, to avoid this we use <strong>structure output</strong>. This ensures that the model will return only the transcription text. And also it becomes easier to handle the response.</p>
<h4 id="step-6-save-the-transcription">Step 6. Save The Transcription</h4>
<p>Now that I&rsquo;ve got the transcription from the above step. All I did is save the transcription along with the <code>audio</code> file name and <code>playlist</code> name in a <code>json</code> file.</p>
<h4 id="step-7-repeat-the-process-untill-end">Step 7. Repeat The Process Untill End</h4>
<p>From <strong>Step 2</strong> to <strong>Step 6</strong> I&rsquo;ve repeated the process untill I&rsquo;ve got the transcription for all the audio files.</p>
<h2 id="automating-youtube-audio-download">Automating Youtube Audio Download</h2>
<p>Now that we&rsquo;ve a complete overall understanding of the workflow, it&rsquo;s time to get our hands dirty with actual coding and how everything works under the hood. Though one think you need to have in mind that
I&rsquo;m not going to explain line by line (comeon you&rsquo;ve Gemini, ChatGPT. Give them the codebase and tell them to explain line by line). So let&rsquo;s start!</p>
<h3 id="manually-copying-all-playlist-urls">Manually Copying All Playlist Urls</h3>
<p>If you remember that in <code>Phase 1 - Step 1</code> I&rsquo;ve gone through each of the playlist and copy pasted them. Again, I know it&rsquo;s stupid to do that. It&rsquo;s not automation. But I did it. So, if you&rsquo;re going to work on
this project then my advice is to automate this step. After manually copying each playlist I&rsquo;ve put them in <code>PlayListUrl.py</code>. Next part was getting each video links from each of the playlist.</p>
<h3 id="getting-all-video-urls">Getting All Video Urls</h3>
<p>Code for this step can be found in <code>VideoLinks.py</code>. Instead of going each line let me share the main gist.
First, I&rsquo;ve imported <code>playLists</code> from <code>PlayListUrl</code> which contain all the playlist urls.</p>
<p>Then I had used <code>pytube</code>. <strong>Pytube</strong> is really cool tbh. You can do a lot of automation for utub using <strong>pytube</strong>. There is a class in <code>pytube</code> name <code>Playlist</code>. All you need to do is to pass the playlist url
while creating the object and that&rsquo;s it. You&rsquo;ll get all the publicly available information of that playlist from that object. Below look in the example:</p>




 








<div class="code-block code-block-custom open">
  <div class="code-header language-python">
    <span class="code-header-left-toggle-area">
      <i class="arrow fas fa-chevron-right fa-fw" aria-hidden="true"></i>
      <span class="lang-name-text">Python</span>
    </span>
    <span class="code-header-right-copy-area">
      <span class="copy" title="Copy to clipboard">
        <i class="far fa-copy fa-fw" aria-hidden="true"></i>
      </span>
    </span>
  </div>
  <div class="highlight-wrapper">
    <div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> pytube <span style="color:#f92672">import</span> Playlist
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;a playlist url&#34;</span>
</span></span><span style="display:flex;"><span>p <span style="color:#f92672">=</span> Playlist(url) <span style="color:#75715e"># passing the url</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># accessing the title of the playlist</span>
</span></span><span style="display:flex;"><span>p<span style="color:#f92672">.</span>title
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># accessing the all the video urls fro that playlist</span>
</span></span><span style="display:flex;"><span>p<span style="color:#f92672">.</span>video_urls
</span></span></code></pre></td></tr></table>
</div>
</div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  let currentCodeBlock;
  
  if (document.currentScript && document.currentScript.previousElementSibling && document.currentScript.previousElementSibling.classList.contains('code-block-custom')) {
    currentCodeBlock = document.currentScript.previousElementSibling;
  } else {
    
    
    
    const allCustomCodeBlocks = document.querySelectorAll('.code-block-custom:not([data-initialized="true"])');
    if (allCustomCodeBlocks.length > 0) {
        currentCodeBlock = allCustomCodeBlocks[allCustomCodeBlocks.length - 1];
    }
  }

  if (!currentCodeBlock) {
    
    return;
  }
  
  
  if (currentCodeBlock.dataset.initialized === 'true') {
    
    return;
  }
  currentCodeBlock.dataset.initialized = 'true';

  const toggleArea = currentCodeBlock.querySelector('.code-header-left-toggle-area');
  const copyBtn = currentCodeBlock.querySelector('.code-header-right-copy-area .copy');
  const highlightWrapper = currentCodeBlock.querySelector('.highlight-wrapper');

  if (toggleArea && highlightWrapper) {
    const actualHighlightDiv = highlightWrapper.querySelector('div.highlight'); 
    const arrowIcon = toggleArea.querySelector('.arrow'); 

    toggleArea.addEventListener('click', function() {
      currentCodeBlock.classList.toggle('open');

      if (currentCodeBlock.classList.contains('open')) { 
        if (arrowIcon) arrowIcon.className = 'arrow fas fa-chevron-down fa-fw'; 
        highlightWrapper.style.display = 'block';
        if (actualHighlightDiv) actualHighlightDiv.style.visibility = 'visible';

        requestAnimationFrame(() => {
          highlightWrapper.style.maxHeight = highlightWrapper.scrollHeight + "px";
        });
      } else { 
        if (arrowIcon) arrowIcon.className = 'arrow fas fa-chevron-right fa-fw'; 
        if (actualHighlightDiv) actualHighlightDiv.style.visibility = 'hidden'; 
        highlightWrapper.style.maxHeight = '0';

        setTimeout(() => {
          if (!currentCodeBlock.classList.contains('open')) { 
            highlightWrapper.style.display = 'none';
          }
        }, 350); 
      }
    });
  }

  if (copyBtn && highlightWrapper) {
    copyBtn.addEventListener('click', function(e) {
      e.stopPropagation(); 
      
      const tableEl = highlightWrapper.querySelector('div.highlight > pre.chroma > table');
      let codeToCopy = '';

      if (tableEl) { 
        const codeCell = tableEl.querySelector('td.lntd:last-child pre > code');
        if (codeCell) {
          codeToCopy = codeCell.innerText;
        } else { 
            const genericCodeInLastCell = tableEl.querySelector('td.lntd:last-child');
            if(genericCodeInLastCell) codeToCopy = genericCodeInLastCell.innerText.trim(); 
        }
      } else { 
        const preCode = highlightWrapper.querySelector('div.highlight > pre.chroma > code, div.highlight > pre > code');
        if (preCode) {
          codeToCopy = preCode.innerText;
        }
      }
      
      if (codeToCopy) {
        navigator.clipboard.writeText(codeToCopy).then(() => {
          const icon = this.querySelector('i');
          const originalTitle = this.title;
          icon.className = 'fas fa-check fa-fw';
          this.title = "Copied!";
          setTimeout(() => {
            icon.className = 'far fa-copy fa-fw';
            this.title = originalTitle;
          }, 2000);
        }).catch(err => {
          this.title = "Failed to copy";
          setTimeout(() => { this.title = "Copy to clipboard"; }, 2000);
        });
      } else {
        this.title = "Nothing to copy";
        setTimeout(() => { this.title = "Copy to clipboard"; }, 2000);
      }
    });
  }

  
  const actualHighlightDivInitial = highlightWrapper ? highlightWrapper.querySelector('div.highlight') : null;
  const arrowIconInitial = toggleArea ? toggleArea.querySelector('.arrow') : null;

  if (currentCodeBlock.classList.contains('open') && highlightWrapper) {
    if (arrowIconInitial) arrowIconInitial.className = 'arrow fas fa-chevron-down fa-fw';
    highlightWrapper.style.display = 'block';
    if (actualHighlightDivInitial) actualHighlightDivInitial.style.visibility = 'visible';
    setTimeout(() => {
        highlightWrapper.style.maxHeight = highlightWrapper.scrollHeight + "px";
    }, 50);
  } else if (highlightWrapper) {
    if (arrowIconInitial) arrowIconInitial.className = 'arrow fas fa-chevron-right fa-fw';
    highlightWrapper.style.maxHeight = '0';
    highlightWrapper.style.display = 'none';
    if (actualHighlightDivInitial) actualHighlightDivInitial.style.visibility = 'hidden';
  }
});
</script> 
</script> 
<p>In the above code you can see I can get all the video urls by passing the playlist url. That&rsquo;s it, now all I had done is loop over <code>playLists</code> list (which was in <code>PlayListUrl</code>) and pass each url to the class, get the <code>title</code> and <code>video_urls</code> and save them to a json file.
In the next step I used this video links to download the video directly.</p>
<h3 id="downloading-all-the-videos-from-url">Downloading All The Videos from url</h3>
<p>So let&rsquo;s summarize what we&rsquo;ve done so far:</p>
<ol>
<li>Manually copied all the playlist urls.</li>
<li>Use those urls to get each video links and save them in a json file</li>
</ol>
<p>Now the final step is to use each of the video url to download them. Again, <strong>Pytube</strong> to the rescue. As I&rsquo;ve mentioned before <strong>Pytube</strong> can download any youtube video if the url is given. Now let&rsquo;s see an example
of how <code>pytube</code> can download youtube video below.</p>
<blockquote>
<p><strong>Before that one big thing I need to mention is that for video download purpose I&rsquo;ve used <code>pytubefix</code> instead of <code>pytube</code>. You can think of <code>pytubefix</code> is an extension of
<code>pytube</code>. Where it fixes lots of bugs and integrate new features but yet act exactly same as <code>pytube</code>.</strong></p></blockquote>




 








<div class="code-block code-block-custom open">
  <div class="code-header language-python">
    <span class="code-header-left-toggle-area">
      <i class="arrow fas fa-chevron-right fa-fw" aria-hidden="true"></i>
      <span class="lang-name-text">Python</span>
    </span>
    <span class="code-header-right-copy-area">
      <span class="copy" title="Copy to clipboard">
        <i class="far fa-copy fa-fw" aria-hidden="true"></i>
      </span>
    </span>
  </div>
  <div class="highlight-wrapper">
    <div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> pytubefix <span style="color:#f92672">import</span> YouTube
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> pytubefix.cli <span style="color:#f92672">import</span> on_progress
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Video url&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># creating the youtube object</span>
</span></span><span style="display:flex;"><span>yt <span style="color:#f92672">=</span> YouTube(url, on_progress_callback <span style="color:#f92672">=</span> on_progress, use_po_token<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>,)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Get the audio stream (mp3 format with the highest bitrate)</span>
</span></span><span style="display:flex;"><span>audio_stream <span style="color:#f92672">=</span> yt<span style="color:#f92672">.</span>streams<span style="color:#f92672">.</span>get_audio_only()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Download the audio file</span>
</span></span><span style="display:flex;"><span>audio_stream<span style="color:#f92672">.</span>download(mp3<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>,output_path<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Audio output path&#34;</span>)
</span></span></code></pre></td></tr></table>
</div>
</div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  let currentCodeBlock;
  
  if (document.currentScript && document.currentScript.previousElementSibling && document.currentScript.previousElementSibling.classList.contains('code-block-custom')) {
    currentCodeBlock = document.currentScript.previousElementSibling;
  } else {
    
    
    
    const allCustomCodeBlocks = document.querySelectorAll('.code-block-custom:not([data-initialized="true"])');
    if (allCustomCodeBlocks.length > 0) {
        currentCodeBlock = allCustomCodeBlocks[allCustomCodeBlocks.length - 1];
    }
  }

  if (!currentCodeBlock) {
    
    return;
  }
  
  
  if (currentCodeBlock.dataset.initialized === 'true') {
    
    return;
  }
  currentCodeBlock.dataset.initialized = 'true';

  const toggleArea = currentCodeBlock.querySelector('.code-header-left-toggle-area');
  const copyBtn = currentCodeBlock.querySelector('.code-header-right-copy-area .copy');
  const highlightWrapper = currentCodeBlock.querySelector('.highlight-wrapper');

  if (toggleArea && highlightWrapper) {
    const actualHighlightDiv = highlightWrapper.querySelector('div.highlight'); 
    const arrowIcon = toggleArea.querySelector('.arrow'); 

    toggleArea.addEventListener('click', function() {
      currentCodeBlock.classList.toggle('open');

      if (currentCodeBlock.classList.contains('open')) { 
        if (arrowIcon) arrowIcon.className = 'arrow fas fa-chevron-down fa-fw'; 
        highlightWrapper.style.display = 'block';
        if (actualHighlightDiv) actualHighlightDiv.style.visibility = 'visible';

        requestAnimationFrame(() => {
          highlightWrapper.style.maxHeight = highlightWrapper.scrollHeight + "px";
        });
      } else { 
        if (arrowIcon) arrowIcon.className = 'arrow fas fa-chevron-right fa-fw'; 
        if (actualHighlightDiv) actualHighlightDiv.style.visibility = 'hidden'; 
        highlightWrapper.style.maxHeight = '0';

        setTimeout(() => {
          if (!currentCodeBlock.classList.contains('open')) { 
            highlightWrapper.style.display = 'none';
          }
        }, 350); 
      }
    });
  }

  if (copyBtn && highlightWrapper) {
    copyBtn.addEventListener('click', function(e) {
      e.stopPropagation(); 
      
      const tableEl = highlightWrapper.querySelector('div.highlight > pre.chroma > table');
      let codeToCopy = '';

      if (tableEl) { 
        const codeCell = tableEl.querySelector('td.lntd:last-child pre > code');
        if (codeCell) {
          codeToCopy = codeCell.innerText;
        } else { 
            const genericCodeInLastCell = tableEl.querySelector('td.lntd:last-child');
            if(genericCodeInLastCell) codeToCopy = genericCodeInLastCell.innerText.trim(); 
        }
      } else { 
        const preCode = highlightWrapper.querySelector('div.highlight > pre.chroma > code, div.highlight > pre > code');
        if (preCode) {
          codeToCopy = preCode.innerText;
        }
      }
      
      if (codeToCopy) {
        navigator.clipboard.writeText(codeToCopy).then(() => {
          const icon = this.querySelector('i');
          const originalTitle = this.title;
          icon.className = 'fas fa-check fa-fw';
          this.title = "Copied!";
          setTimeout(() => {
            icon.className = 'far fa-copy fa-fw';
            this.title = originalTitle;
          }, 2000);
        }).catch(err => {
          this.title = "Failed to copy";
          setTimeout(() => { this.title = "Copy to clipboard"; }, 2000);
        });
      } else {
        this.title = "Nothing to copy";
        setTimeout(() => { this.title = "Copy to clipboard"; }, 2000);
      }
    });
  }

  
  const actualHighlightDivInitial = highlightWrapper ? highlightWrapper.querySelector('div.highlight') : null;
  const arrowIconInitial = toggleArea ? toggleArea.querySelector('.arrow') : null;

  if (currentCodeBlock.classList.contains('open') && highlightWrapper) {
    if (arrowIconInitial) arrowIconInitial.className = 'arrow fas fa-chevron-down fa-fw';
    highlightWrapper.style.display = 'block';
    if (actualHighlightDivInitial) actualHighlightDivInitial.style.visibility = 'visible';
    setTimeout(() => {
        highlightWrapper.style.maxHeight = highlightWrapper.scrollHeight + "px";
    }, 50);
  } else if (highlightWrapper) {
    if (arrowIconInitial) arrowIconInitial.className = 'arrow fas fa-chevron-right fa-fw';
    highlightWrapper.style.maxHeight = '0';
    highlightWrapper.style.display = 'none';
    if (actualHighlightDivInitial) actualHighlightDivInitial.style.visibility = 'hidden';
  }
});
</script> 
</script> 
<p>Let&rsquo;s break it down the code piece by piece.</p>
<ol>
<li>First we created a <code>yt</code> object from <code>YouTube</code> class. We have passed <strong>3 parameters or arguments</strong>. First one is the <code>video url</code>, Second one is <code>on_progress</code> generator. The purpose of it to show a progress bar in the terminal so that we know how much download have completed at a given time. Finally we set <code>use_po_token</code> to <code>true</code>. I&rsquo;ll discuss about this in details in a bit.</li>
<li>After creating <code>yt</code> object next we need to create an <code>stream</code> object. This is required to download the audio (or video). We use <code>.get_audio_only()</code> method to grab only the audio and exclude the video.</li>
<li>Finally we <strong>download</strong> the audio using the <code>.download</code> method. There we pass <strong>2 arguments</strong>. First, <code>mp3=true</code> is telling to download the audio in <strong>mp3 format</strong>. Then, <code>output_path</code> argument is telling the program to <strong>store the file in that path</strong>.</li>
</ol>
<p>This is how we download a single youtube video using <code>pytube</code> or to be more precise <code>pytubefix</code>. <strong>Now in my usecase we have all the urls. All I did is created a loop and loop over each url and downloaded them one by one and stored them in a specific path.</strong></p>
<h3 id="now-lets-talk-about-automation-issues-ive-faced">Now Let&rsquo;s Talk About Automation Issues I&rsquo;ve Faced</h3>
<p>Well well, it wasn&rsquo;t easy sailing at all. Creating complete automation was way harder than doing a single video and that&rsquo;s cause of youtube making it super difficult to download their videos. Here are 2 issues I&rsquo;ve faced.</p>
<ol>
<li>
<p><strong>Manually giving po token:</strong> Remember <code>po_token</code> was set to true. So <strong>po token</strong> basically means <strong>proof of origin</strong>, basically this parameters is needed to pass alongside the url otherwise youtube will return <code>403</code> response. You can think of it some kinda <strong>authetication token</strong> where youtube is verifying if the request is from an active user or bot. Typically the browser create this <strong>po token</strong> automatically behind the scene. For my automation script I have to copy the <strong>po token</strong> from my browser and pasted in the terminal. I&rsquo;m not going in details how to get the <code>po_token</code> from the browser but I&rsquo;m giving this <a href="https://github.com/JuanBindez/pytubefix/pull/209" target="_blank" rel="noopener noreffer "><strong>pull request</strong></a> which explains how to get the <strong>po token</strong> from the browser and also how to automate the entire process.</p>
</li>
<li>
<p><strong>Getting blank audio file:</strong> After giving the <code>po_token</code> and starting the automation script I&rsquo;ve faced another issue which was there were lots of videos was taking a long amount of time to download and in the end those videos were failed to download and generated an empty file. I don&rsquo;t know the exact reason for that but I&rsquo;m assuming it is utub making it harder to download this video by using some bot protection. I didn&rsquo;t investigate further. I was able to download more than 300 videos and the rest of the videos were failed to download.</p>
</li>
</ol>
<h3 id="things-to-consider">Things to Consider</h3>
<p>If you want to build this automation project then you can focus on these below things to improve this automation process and avoid the stupid mistakes I&rsquo;ve made.</p>
<ol>
<li><strong>Automate Playlist Urls:</strong> You should figure out how can you automatically get all the playlist url link for a given channel. So that you don&rsquo;t have to manually copy and paste it.</li>
<li><strong>Automating PO Token Generation:</strong> If you follow the instructions from <a href="https://github.com/JuanBindez/pytubefix/pull/209" target="_blank" rel="noopener noreffer "><strong>here</strong></a> then you can completely automate the entire automation script. Then you can run that inside a vm or schedule a run using github actions.</li>
<li><strong>Reattempt Failed Videos:</strong> In my case I was stupid enough to not take logs of the failed videos. Therefore I didn&rsquo;t know which videos didn&rsquo;t download in the process. But you can keep a log of all the failed video url and then create a retry mechanism where the script will try to download only the failed videos.</li>
</ol>
<p>If you add the above <strong>3 steps</strong> in the current automation script then you&rsquo;ll have a much robust youtube download automation script which can be used for any usecase.</p>
<h2 id="creating-the-transcription-pipeline">Creating the Transcription Pipeline</h2>
<p>Congratulations! We&rsquo;ve successfully downloaded youtube videos using the automation script. Now comes the fun part. We&rsquo;ll <strong>transcribe</strong> all of this youtube videos in <strong>Bangla</strong></p>
<h3 id="why-choose-evil-google">Why Choose Evil Google</h3>
<p>For transcribing the audio to bangla I had choosen google&rsquo;s <strong>Gemini Flash 2.0</strong>. Now the question is why choose the <strong>Evil Google</strong> who is stealing all of our data. The reasons are:</p>
<ol>
<li><strong>Google&rsquo;s Generosity:</strong> This is the main reason, google is offering 1.5k free api request for gemini flash 2.0 without providing credit card. Google is the only one who is offering one of their frontier LLM with a free api quota.</li>
<li><strong>Gemini Flash 2 Performance:</strong> From my testing gemini flash 2 was performing really good in multilingual transcription. And google&rsquo;s LLM perform better in Bangla than any other models.</li>
</ol>
<p>So for above 2 reason I&rsquo;ve choosen <strong>Gemini flash 2</strong> LLM to transcribe the audio into Bangla. Though I&rsquo;m giving google permission to use my api call to improve their models. But again I&rsquo;m using youtube video data to begin with so that there is nothing confidential I&rsquo;m sharing to begin with.</p>
<h3 id="generating-the-transcription">Generating The Transcription</h3>
<p>Now I&rsquo;ll show you how you can upload an audio file and get the transcription using the api. Remember the api key? We will use that api key to get all the response. I&rsquo;ve explained my entire workflow for in the <a href="#transcription-phase-2" rel=""><strong>Transcription phase</strong></a>. I&rsquo;m not going to explain the entire code but rather show you how to get bangla transcription for a single audio file. If you want the entire code then refer back to <code>pipeline.py</code> file in the <a href="https://github.com/KillerShoaib/BanglaYoutubeTranscribe" target="_blank" rel="noopener noreffer "><strong>Github repo</strong></a>.</p>
<blockquote>
<p><strong>If you haven&rsquo;t installed <code>genai</code> client already then install it using <code>pip install google-generativeai</code>. But google is going deprecated this library and they are migrating to <code>google-genai</code>. Please refer to the <a href="https://pypi.org/project/google-genai/" target="_blank" rel="noopener noreffer "><strong>docs</strong></a> for utilizing the latest library.</strong></p></blockquote>
<h4 id="setting-up-the-api">Setting up the API</h4>
<p>Now let&rsquo;s see the code snippet one by one. First we need to pass the <code>gemini api key</code> to the <code>genai</code> client.




 








<div class="code-block code-block-custom open">
  <div class="code-header language-python">
    <span class="code-header-left-toggle-area">
      <i class="arrow fas fa-chevron-right fa-fw" aria-hidden="true"></i>
      <span class="lang-name-text">Python</span>
    </span>
    <span class="code-header-right-copy-area">
      <span class="copy" title="Copy to clipboard">
        <i class="far fa-copy fa-fw" aria-hidden="true"></i>
      </span>
    </span>
  </div>
  <div class="highlight-wrapper">
    <div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> google.generativeai <span style="color:#66d9ef">as</span> genai
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> google.ai.generativelanguage_v1beta.types <span style="color:#f92672">import</span> content
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># passing the api key</span>
</span></span><span style="display:flex;"><span>genai<span style="color:#f92672">.</span>configure(api_key<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;GEMINI_API_KEY_COPIED_EARLIER&#34;</span>)
</span></span></code></pre></td></tr></table>
</div>
</div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  let currentCodeBlock;
  
  if (document.currentScript && document.currentScript.previousElementSibling && document.currentScript.previousElementSibling.classList.contains('code-block-custom')) {
    currentCodeBlock = document.currentScript.previousElementSibling;
  } else {
    
    
    
    const allCustomCodeBlocks = document.querySelectorAll('.code-block-custom:not([data-initialized="true"])');
    if (allCustomCodeBlocks.length > 0) {
        currentCodeBlock = allCustomCodeBlocks[allCustomCodeBlocks.length - 1];
    }
  }

  if (!currentCodeBlock) {
    
    return;
  }
  
  
  if (currentCodeBlock.dataset.initialized === 'true') {
    
    return;
  }
  currentCodeBlock.dataset.initialized = 'true';

  const toggleArea = currentCodeBlock.querySelector('.code-header-left-toggle-area');
  const copyBtn = currentCodeBlock.querySelector('.code-header-right-copy-area .copy');
  const highlightWrapper = currentCodeBlock.querySelector('.highlight-wrapper');

  if (toggleArea && highlightWrapper) {
    const actualHighlightDiv = highlightWrapper.querySelector('div.highlight'); 
    const arrowIcon = toggleArea.querySelector('.arrow'); 

    toggleArea.addEventListener('click', function() {
      currentCodeBlock.classList.toggle('open');

      if (currentCodeBlock.classList.contains('open')) { 
        if (arrowIcon) arrowIcon.className = 'arrow fas fa-chevron-down fa-fw'; 
        highlightWrapper.style.display = 'block';
        if (actualHighlightDiv) actualHighlightDiv.style.visibility = 'visible';

        requestAnimationFrame(() => {
          highlightWrapper.style.maxHeight = highlightWrapper.scrollHeight + "px";
        });
      } else { 
        if (arrowIcon) arrowIcon.className = 'arrow fas fa-chevron-right fa-fw'; 
        if (actualHighlightDiv) actualHighlightDiv.style.visibility = 'hidden'; 
        highlightWrapper.style.maxHeight = '0';

        setTimeout(() => {
          if (!currentCodeBlock.classList.contains('open')) { 
            highlightWrapper.style.display = 'none';
          }
        }, 350); 
      }
    });
  }

  if (copyBtn && highlightWrapper) {
    copyBtn.addEventListener('click', function(e) {
      e.stopPropagation(); 
      
      const tableEl = highlightWrapper.querySelector('div.highlight > pre.chroma > table');
      let codeToCopy = '';

      if (tableEl) { 
        const codeCell = tableEl.querySelector('td.lntd:last-child pre > code');
        if (codeCell) {
          codeToCopy = codeCell.innerText;
        } else { 
            const genericCodeInLastCell = tableEl.querySelector('td.lntd:last-child');
            if(genericCodeInLastCell) codeToCopy = genericCodeInLastCell.innerText.trim(); 
        }
      } else { 
        const preCode = highlightWrapper.querySelector('div.highlight > pre.chroma > code, div.highlight > pre > code');
        if (preCode) {
          codeToCopy = preCode.innerText;
        }
      }
      
      if (codeToCopy) {
        navigator.clipboard.writeText(codeToCopy).then(() => {
          const icon = this.querySelector('i');
          const originalTitle = this.title;
          icon.className = 'fas fa-check fa-fw';
          this.title = "Copied!";
          setTimeout(() => {
            icon.className = 'far fa-copy fa-fw';
            this.title = originalTitle;
          }, 2000);
        }).catch(err => {
          this.title = "Failed to copy";
          setTimeout(() => { this.title = "Copy to clipboard"; }, 2000);
        });
      } else {
        this.title = "Nothing to copy";
        setTimeout(() => { this.title = "Copy to clipboard"; }, 2000);
      }
    });
  }

  
  const actualHighlightDivInitial = highlightWrapper ? highlightWrapper.querySelector('div.highlight') : null;
  const arrowIconInitial = toggleArea ? toggleArea.querySelector('.arrow') : null;

  if (currentCodeBlock.classList.contains('open') && highlightWrapper) {
    if (arrowIconInitial) arrowIconInitial.className = 'arrow fas fa-chevron-down fa-fw';
    highlightWrapper.style.display = 'block';
    if (actualHighlightDivInitial) actualHighlightDivInitial.style.visibility = 'visible';
    setTimeout(() => {
        highlightWrapper.style.maxHeight = highlightWrapper.scrollHeight + "px";
    }, 50);
  } else if (highlightWrapper) {
    if (arrowIconInitial) arrowIconInitial.className = 'arrow fas fa-chevron-right fa-fw';
    highlightWrapper.style.maxHeight = '0';
    highlightWrapper.style.display = 'none';
    if (actualHighlightDivInitial) actualHighlightDivInitial.style.visibility = 'hidden';
  }
});
</script> 
</script> </p>
<h4 id="setting-parameters">Setting Parameters</h4>
<p>After setting up the api key now we&rsquo;ll configure different <strong>LLM parameters</strong> (i.e: <code>temperature</code>, <code>top_p</code>)</p>
<p>



 








<div class="code-block code-block-custom open">
  <div class="code-header language-python">
    <span class="code-header-left-toggle-area">
      <i class="arrow fas fa-chevron-right fa-fw" aria-hidden="true"></i>
      <span class="lang-name-text">Python</span>
    </span>
    <span class="code-header-right-copy-area">
      <span class="copy" title="Copy to clipboard">
        <i class="far fa-copy fa-fw" aria-hidden="true"></i>
      </span>
    </span>
  </div>
  <div class="highlight-wrapper">
    <div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>generation_config <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;temperature&#34;</span>: <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;top_p&#34;</span>: <span style="color:#ae81ff">0.2</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;top_k&#34;</span>: <span style="color:#ae81ff">20</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;response_schema&#34;</span>: content<span style="color:#f92672">.</span>Schema(
</span></span><span style="display:flex;"><span>        type <span style="color:#f92672">=</span> content<span style="color:#f92672">.</span>Type<span style="color:#f92672">.</span>OBJECT,
</span></span><span style="display:flex;"><span>        properties <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;Bangla_transcription_from_audio&#34;</span>: content<span style="color:#f92672">.</span>Schema(
</span></span><span style="display:flex;"><span>            type <span style="color:#f92672">=</span> content<span style="color:#f92672">.</span>Type<span style="color:#f92672">.</span>STRING,
</span></span><span style="display:flex;"><span>        ),
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>    ),
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;response_mime_type&#34;</span>: <span style="color:#e6db74">&#34;application/json&#34;</span>,
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span></code></pre></td></tr></table>
</div>
</div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  let currentCodeBlock;
  
  if (document.currentScript && document.currentScript.previousElementSibling && document.currentScript.previousElementSibling.classList.contains('code-block-custom')) {
    currentCodeBlock = document.currentScript.previousElementSibling;
  } else {
    
    
    
    const allCustomCodeBlocks = document.querySelectorAll('.code-block-custom:not([data-initialized="true"])');
    if (allCustomCodeBlocks.length > 0) {
        currentCodeBlock = allCustomCodeBlocks[allCustomCodeBlocks.length - 1];
    }
  }

  if (!currentCodeBlock) {
    
    return;
  }
  
  
  if (currentCodeBlock.dataset.initialized === 'true') {
    
    return;
  }
  currentCodeBlock.dataset.initialized = 'true';

  const toggleArea = currentCodeBlock.querySelector('.code-header-left-toggle-area');
  const copyBtn = currentCodeBlock.querySelector('.code-header-right-copy-area .copy');
  const highlightWrapper = currentCodeBlock.querySelector('.highlight-wrapper');

  if (toggleArea && highlightWrapper) {
    const actualHighlightDiv = highlightWrapper.querySelector('div.highlight'); 
    const arrowIcon = toggleArea.querySelector('.arrow'); 

    toggleArea.addEventListener('click', function() {
      currentCodeBlock.classList.toggle('open');

      if (currentCodeBlock.classList.contains('open')) { 
        if (arrowIcon) arrowIcon.className = 'arrow fas fa-chevron-down fa-fw'; 
        highlightWrapper.style.display = 'block';
        if (actualHighlightDiv) actualHighlightDiv.style.visibility = 'visible';

        requestAnimationFrame(() => {
          highlightWrapper.style.maxHeight = highlightWrapper.scrollHeight + "px";
        });
      } else { 
        if (arrowIcon) arrowIcon.className = 'arrow fas fa-chevron-right fa-fw'; 
        if (actualHighlightDiv) actualHighlightDiv.style.visibility = 'hidden'; 
        highlightWrapper.style.maxHeight = '0';

        setTimeout(() => {
          if (!currentCodeBlock.classList.contains('open')) { 
            highlightWrapper.style.display = 'none';
          }
        }, 350); 
      }
    });
  }

  if (copyBtn && highlightWrapper) {
    copyBtn.addEventListener('click', function(e) {
      e.stopPropagation(); 
      
      const tableEl = highlightWrapper.querySelector('div.highlight > pre.chroma > table');
      let codeToCopy = '';

      if (tableEl) { 
        const codeCell = tableEl.querySelector('td.lntd:last-child pre > code');
        if (codeCell) {
          codeToCopy = codeCell.innerText;
        } else { 
            const genericCodeInLastCell = tableEl.querySelector('td.lntd:last-child');
            if(genericCodeInLastCell) codeToCopy = genericCodeInLastCell.innerText.trim(); 
        }
      } else { 
        const preCode = highlightWrapper.querySelector('div.highlight > pre.chroma > code, div.highlight > pre > code');
        if (preCode) {
          codeToCopy = preCode.innerText;
        }
      }
      
      if (codeToCopy) {
        navigator.clipboard.writeText(codeToCopy).then(() => {
          const icon = this.querySelector('i');
          const originalTitle = this.title;
          icon.className = 'fas fa-check fa-fw';
          this.title = "Copied!";
          setTimeout(() => {
            icon.className = 'far fa-copy fa-fw';
            this.title = originalTitle;
          }, 2000);
        }).catch(err => {
          this.title = "Failed to copy";
          setTimeout(() => { this.title = "Copy to clipboard"; }, 2000);
        });
      } else {
        this.title = "Nothing to copy";
        setTimeout(() => { this.title = "Copy to clipboard"; }, 2000);
      }
    });
  }

  
  const actualHighlightDivInitial = highlightWrapper ? highlightWrapper.querySelector('div.highlight') : null;
  const arrowIconInitial = toggleArea ? toggleArea.querySelector('.arrow') : null;

  if (currentCodeBlock.classList.contains('open') && highlightWrapper) {
    if (arrowIconInitial) arrowIconInitial.className = 'arrow fas fa-chevron-down fa-fw';
    highlightWrapper.style.display = 'block';
    if (actualHighlightDivInitial) actualHighlightDivInitial.style.visibility = 'visible';
    setTimeout(() => {
        highlightWrapper.style.maxHeight = highlightWrapper.scrollHeight + "px";
    }, 50);
  } else if (highlightWrapper) {
    if (arrowIconInitial) arrowIconInitial.className = 'arrow fas fa-chevron-right fa-fw';
    highlightWrapper.style.maxHeight = '0';
    highlightWrapper.style.display = 'none';
    if (actualHighlightDivInitial) actualHighlightDivInitial.style.visibility = 'hidden';
  }
});
</script> 
</script> 
Let&rsquo;s understand what&rsquo;s happening above:</p>
<ol>
<li>First we set the <code>temperature</code> parameter value to 0</li>
<li>then set the <code>top_p</code> parameter value to 0.2</li>
<li>then set the <code>top_k</code> parameter value to 20</li>
<li>Finally, we utilize <strong>structure output</strong>. Means the final response from the LLM will be in a <code>json</code> format. Where the key name will be <code>Bangla_transcription_from_audio</code> and the value of that key will be the <code>transcription string</code> for that particular audio,</li>
</ol>
<p><strong>What is Structure Output?</strong></p>
<p>I&rsquo;m going to talk very breifly about <strong>structure output.</strong> Structure output from LLM means forcing the LLM to give the <strong>output in a specific format</strong>. That specific format can be a <code>json schema</code> or <code>xml schema</code>. Currently the <code>json schema</code> is the most famous way to get the structure output from LLMs. The main reason to use <strong>structure output is to have control</strong>. Suppose when I was tring to transcribe the audio then there will be some <strong>additional text</strong> that will come with the transcribtion such as &ldquo;Here is your transcription&hellip;&rdquo;, &ldquo;okay let&rsquo;s transcribe it&hellip;&rdquo;. <strong>This additional text won&rsquo;t be added for structure output.</strong></p>
<h4 id="creating-system-instruction">Creating System Instruction</h4>
<p>We need to prompt the model so that model knows exactly what to do. This part can be refer as <strong>prompt engineering</strong> where we&rsquo;re prompting or giving instruction to the LLM in a way so that it can give us the desired output. I&rsquo;ve used the below <strong>instruction prompt:</strong></p>




 








<div class="code-block code-block-custom open">
  <div class="code-header language-markdown">
    <span class="code-header-left-toggle-area">
      <i class="arrow fas fa-chevron-right fa-fw" aria-hidden="true"></i>
      <span class="lang-name-text">Markdown</span>
    </span>
    <span class="code-header-right-copy-area">
      <span class="copy" title="Copy to clipboard">
        <i class="far fa-copy fa-fw" aria-hidden="true"></i>
      </span>
    </span>
  </div>
  <div class="highlight-wrapper">
    <div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>You&#39;re an expert at transcribing bangla audio into bangla text. Now follow the below steps:
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">1.</span> You&#39;ll be given a bangla audio. Your task is to only transcribe that bangla audio in bangla text. 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">2.</span> Do not add anything else. Only transcribe the audio into bangla.
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">3.</span> Sometimes in the audio there maybe english words. You don&#39;t have to translate the english words into bangla. Rather while transcribing keep the english words as it is.
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">4.</span> Finally return your final bangla transcription (with some english text if there is any).
</span></span></code></pre></td></tr></table>
</div>
</div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  let currentCodeBlock;
  
  if (document.currentScript && document.currentScript.previousElementSibling && document.currentScript.previousElementSibling.classList.contains('code-block-custom')) {
    currentCodeBlock = document.currentScript.previousElementSibling;
  } else {
    
    
    
    const allCustomCodeBlocks = document.querySelectorAll('.code-block-custom:not([data-initialized="true"])');
    if (allCustomCodeBlocks.length > 0) {
        currentCodeBlock = allCustomCodeBlocks[allCustomCodeBlocks.length - 1];
    }
  }

  if (!currentCodeBlock) {
    
    return;
  }
  
  
  if (currentCodeBlock.dataset.initialized === 'true') {
    
    return;
  }
  currentCodeBlock.dataset.initialized = 'true';

  const toggleArea = currentCodeBlock.querySelector('.code-header-left-toggle-area');
  const copyBtn = currentCodeBlock.querySelector('.code-header-right-copy-area .copy');
  const highlightWrapper = currentCodeBlock.querySelector('.highlight-wrapper');

  if (toggleArea && highlightWrapper) {
    const actualHighlightDiv = highlightWrapper.querySelector('div.highlight'); 
    const arrowIcon = toggleArea.querySelector('.arrow'); 

    toggleArea.addEventListener('click', function() {
      currentCodeBlock.classList.toggle('open');

      if (currentCodeBlock.classList.contains('open')) { 
        if (arrowIcon) arrowIcon.className = 'arrow fas fa-chevron-down fa-fw'; 
        highlightWrapper.style.display = 'block';
        if (actualHighlightDiv) actualHighlightDiv.style.visibility = 'visible';

        requestAnimationFrame(() => {
          highlightWrapper.style.maxHeight = highlightWrapper.scrollHeight + "px";
        });
      } else { 
        if (arrowIcon) arrowIcon.className = 'arrow fas fa-chevron-right fa-fw'; 
        if (actualHighlightDiv) actualHighlightDiv.style.visibility = 'hidden'; 
        highlightWrapper.style.maxHeight = '0';

        setTimeout(() => {
          if (!currentCodeBlock.classList.contains('open')) { 
            highlightWrapper.style.display = 'none';
          }
        }, 350); 
      }
    });
  }

  if (copyBtn && highlightWrapper) {
    copyBtn.addEventListener('click', function(e) {
      e.stopPropagation(); 
      
      const tableEl = highlightWrapper.querySelector('div.highlight > pre.chroma > table');
      let codeToCopy = '';

      if (tableEl) { 
        const codeCell = tableEl.querySelector('td.lntd:last-child pre > code');
        if (codeCell) {
          codeToCopy = codeCell.innerText;
        } else { 
            const genericCodeInLastCell = tableEl.querySelector('td.lntd:last-child');
            if(genericCodeInLastCell) codeToCopy = genericCodeInLastCell.innerText.trim(); 
        }
      } else { 
        const preCode = highlightWrapper.querySelector('div.highlight > pre.chroma > code, div.highlight > pre > code');
        if (preCode) {
          codeToCopy = preCode.innerText;
        }
      }
      
      if (codeToCopy) {
        navigator.clipboard.writeText(codeToCopy).then(() => {
          const icon = this.querySelector('i');
          const originalTitle = this.title;
          icon.className = 'fas fa-check fa-fw';
          this.title = "Copied!";
          setTimeout(() => {
            icon.className = 'far fa-copy fa-fw';
            this.title = originalTitle;
          }, 2000);
        }).catch(err => {
          this.title = "Failed to copy";
          setTimeout(() => { this.title = "Copy to clipboard"; }, 2000);
        });
      } else {
        this.title = "Nothing to copy";
        setTimeout(() => { this.title = "Copy to clipboard"; }, 2000);
      }
    });
  }

  
  const actualHighlightDivInitial = highlightWrapper ? highlightWrapper.querySelector('div.highlight') : null;
  const arrowIconInitial = toggleArea ? toggleArea.querySelector('.arrow') : null;

  if (currentCodeBlock.classList.contains('open') && highlightWrapper) {
    if (arrowIconInitial) arrowIconInitial.className = 'arrow fas fa-chevron-down fa-fw';
    highlightWrapper.style.display = 'block';
    if (actualHighlightDivInitial) actualHighlightDivInitial.style.visibility = 'visible';
    setTimeout(() => {
        highlightWrapper.style.maxHeight = highlightWrapper.scrollHeight + "px";
    }, 50);
  } else if (highlightWrapper) {
    if (arrowIconInitial) arrowIconInitial.className = 'arrow fas fa-chevron-right fa-fw';
    highlightWrapper.style.maxHeight = '0';
    highlightWrapper.style.display = 'none';
    if (actualHighlightDivInitial) actualHighlightDivInitial.style.visibility = 'hidden';
  }
});
</script> 
</script> 
<h4 id="creating-the-model-instance">Creating the Model Instance</h4>
<p>So far, we&rsquo;ve <strong>setup parameters</strong>, created an <strong>instruction prompt</strong> and now we need to pass this alongside the model or llm name to create the model instance.</p>




 








<div class="code-block code-block-custom open">
  <div class="code-header language-python">
    <span class="code-header-left-toggle-area">
      <i class="arrow fas fa-chevron-right fa-fw" aria-hidden="true"></i>
      <span class="lang-name-text">Python</span>
    </span>
    <span class="code-header-right-copy-area">
      <span class="copy" title="Copy to clipboard">
        <i class="far fa-copy fa-fw" aria-hidden="true"></i>
      </span>
    </span>
  </div>
  <div class="highlight-wrapper">
    <div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>model <span style="color:#f92672">=</span> genai<span style="color:#f92672">.</span>GenerativeModel(
</span></span><span style="display:flex;"><span>  model_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;gemini-2.0-flash-exp&#34;</span>,
</span></span><span style="display:flex;"><span>  generation_config<span style="color:#f92672">=</span>generation_config,
</span></span><span style="display:flex;"><span>  system_instruction<span style="color:#f92672">=</span>SYSTEM_INST,
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></td></tr></table>
</div>
</div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  let currentCodeBlock;
  
  if (document.currentScript && document.currentScript.previousElementSibling && document.currentScript.previousElementSibling.classList.contains('code-block-custom')) {
    currentCodeBlock = document.currentScript.previousElementSibling;
  } else {
    
    
    
    const allCustomCodeBlocks = document.querySelectorAll('.code-block-custom:not([data-initialized="true"])');
    if (allCustomCodeBlocks.length > 0) {
        currentCodeBlock = allCustomCodeBlocks[allCustomCodeBlocks.length - 1];
    }
  }

  if (!currentCodeBlock) {
    
    return;
  }
  
  
  if (currentCodeBlock.dataset.initialized === 'true') {
    
    return;
  }
  currentCodeBlock.dataset.initialized = 'true';

  const toggleArea = currentCodeBlock.querySelector('.code-header-left-toggle-area');
  const copyBtn = currentCodeBlock.querySelector('.code-header-right-copy-area .copy');
  const highlightWrapper = currentCodeBlock.querySelector('.highlight-wrapper');

  if (toggleArea && highlightWrapper) {
    const actualHighlightDiv = highlightWrapper.querySelector('div.highlight'); 
    const arrowIcon = toggleArea.querySelector('.arrow'); 

    toggleArea.addEventListener('click', function() {
      currentCodeBlock.classList.toggle('open');

      if (currentCodeBlock.classList.contains('open')) { 
        if (arrowIcon) arrowIcon.className = 'arrow fas fa-chevron-down fa-fw'; 
        highlightWrapper.style.display = 'block';
        if (actualHighlightDiv) actualHighlightDiv.style.visibility = 'visible';

        requestAnimationFrame(() => {
          highlightWrapper.style.maxHeight = highlightWrapper.scrollHeight + "px";
        });
      } else { 
        if (arrowIcon) arrowIcon.className = 'arrow fas fa-chevron-right fa-fw'; 
        if (actualHighlightDiv) actualHighlightDiv.style.visibility = 'hidden'; 
        highlightWrapper.style.maxHeight = '0';

        setTimeout(() => {
          if (!currentCodeBlock.classList.contains('open')) { 
            highlightWrapper.style.display = 'none';
          }
        }, 350); 
      }
    });
  }

  if (copyBtn && highlightWrapper) {
    copyBtn.addEventListener('click', function(e) {
      e.stopPropagation(); 
      
      const tableEl = highlightWrapper.querySelector('div.highlight > pre.chroma > table');
      let codeToCopy = '';

      if (tableEl) { 
        const codeCell = tableEl.querySelector('td.lntd:last-child pre > code');
        if (codeCell) {
          codeToCopy = codeCell.innerText;
        } else { 
            const genericCodeInLastCell = tableEl.querySelector('td.lntd:last-child');
            if(genericCodeInLastCell) codeToCopy = genericCodeInLastCell.innerText.trim(); 
        }
      } else { 
        const preCode = highlightWrapper.querySelector('div.highlight > pre.chroma > code, div.highlight > pre > code');
        if (preCode) {
          codeToCopy = preCode.innerText;
        }
      }
      
      if (codeToCopy) {
        navigator.clipboard.writeText(codeToCopy).then(() => {
          const icon = this.querySelector('i');
          const originalTitle = this.title;
          icon.className = 'fas fa-check fa-fw';
          this.title = "Copied!";
          setTimeout(() => {
            icon.className = 'far fa-copy fa-fw';
            this.title = originalTitle;
          }, 2000);
        }).catch(err => {
          this.title = "Failed to copy";
          setTimeout(() => { this.title = "Copy to clipboard"; }, 2000);
        });
      } else {
        this.title = "Nothing to copy";
        setTimeout(() => { this.title = "Copy to clipboard"; }, 2000);
      }
    });
  }

  
  const actualHighlightDivInitial = highlightWrapper ? highlightWrapper.querySelector('div.highlight') : null;
  const arrowIconInitial = toggleArea ? toggleArea.querySelector('.arrow') : null;

  if (currentCodeBlock.classList.contains('open') && highlightWrapper) {
    if (arrowIconInitial) arrowIconInitial.className = 'arrow fas fa-chevron-down fa-fw';
    highlightWrapper.style.display = 'block';
    if (actualHighlightDivInitial) actualHighlightDivInitial.style.visibility = 'visible';
    setTimeout(() => {
        highlightWrapper.style.maxHeight = highlightWrapper.scrollHeight + "px";
    }, 50);
  } else if (highlightWrapper) {
    if (arrowIconInitial) arrowIconInitial.className = 'arrow fas fa-chevron-right fa-fw';
    highlightWrapper.style.maxHeight = '0';
    highlightWrapper.style.display = 'none';
    if (actualHighlightDivInitial) actualHighlightDivInitial.style.visibility = 'hidden';
  }
});
</script> 
</script> 
<h4 id="uploading-audio-file">Uploading Audio File</h4>




 








<div class="code-block code-block-custom open">
  <div class="code-header language-python">
    <span class="code-header-left-toggle-area">
      <i class="arrow fas fa-chevron-right fa-fw" aria-hidden="true"></i>
      <span class="lang-name-text">Python</span>
    </span>
    <span class="code-header-right-copy-area">
      <span class="copy" title="Copy to clipboard">
        <i class="far fa-copy fa-fw" aria-hidden="true"></i>
      </span>
    </span>
  </div>
  <div class="highlight-wrapper">
    <div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">upload_to_gemini</span>(path:str, mime_type:Optional[str]<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  file <span style="color:#f92672">=</span> genai<span style="color:#f92672">.</span>upload_file(path, mime_type<span style="color:#f92672">=</span>mime_type)
</span></span><span style="display:flex;"><span>  print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Uploaded file &#39;</span><span style="color:#e6db74">{</span>file<span style="color:#f92672">.</span>display_name<span style="color:#e6db74">}</span><span style="color:#e6db74">&#39; as: </span><span style="color:#e6db74">{</span>file<span style="color:#f92672">.</span>uri<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> file
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>files <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>  upload_to_gemini(<span style="color:#e6db74">&#34;audio_file_path&#34;</span>)
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></td></tr></table>
</div>
</div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  let currentCodeBlock;
  
  if (document.currentScript && document.currentScript.previousElementSibling && document.currentScript.previousElementSibling.classList.contains('code-block-custom')) {
    currentCodeBlock = document.currentScript.previousElementSibling;
  } else {
    
    
    
    const allCustomCodeBlocks = document.querySelectorAll('.code-block-custom:not([data-initialized="true"])');
    if (allCustomCodeBlocks.length > 0) {
        currentCodeBlock = allCustomCodeBlocks[allCustomCodeBlocks.length - 1];
    }
  }

  if (!currentCodeBlock) {
    
    return;
  }
  
  
  if (currentCodeBlock.dataset.initialized === 'true') {
    
    return;
  }
  currentCodeBlock.dataset.initialized = 'true';

  const toggleArea = currentCodeBlock.querySelector('.code-header-left-toggle-area');
  const copyBtn = currentCodeBlock.querySelector('.code-header-right-copy-area .copy');
  const highlightWrapper = currentCodeBlock.querySelector('.highlight-wrapper');

  if (toggleArea && highlightWrapper) {
    const actualHighlightDiv = highlightWrapper.querySelector('div.highlight'); 
    const arrowIcon = toggleArea.querySelector('.arrow'); 

    toggleArea.addEventListener('click', function() {
      currentCodeBlock.classList.toggle('open');

      if (currentCodeBlock.classList.contains('open')) { 
        if (arrowIcon) arrowIcon.className = 'arrow fas fa-chevron-down fa-fw'; 
        highlightWrapper.style.display = 'block';
        if (actualHighlightDiv) actualHighlightDiv.style.visibility = 'visible';

        requestAnimationFrame(() => {
          highlightWrapper.style.maxHeight = highlightWrapper.scrollHeight + "px";
        });
      } else { 
        if (arrowIcon) arrowIcon.className = 'arrow fas fa-chevron-right fa-fw'; 
        if (actualHighlightDiv) actualHighlightDiv.style.visibility = 'hidden'; 
        highlightWrapper.style.maxHeight = '0';

        setTimeout(() => {
          if (!currentCodeBlock.classList.contains('open')) { 
            highlightWrapper.style.display = 'none';
          }
        }, 350); 
      }
    });
  }

  if (copyBtn && highlightWrapper) {
    copyBtn.addEventListener('click', function(e) {
      e.stopPropagation(); 
      
      const tableEl = highlightWrapper.querySelector('div.highlight > pre.chroma > table');
      let codeToCopy = '';

      if (tableEl) { 
        const codeCell = tableEl.querySelector('td.lntd:last-child pre > code');
        if (codeCell) {
          codeToCopy = codeCell.innerText;
        } else { 
            const genericCodeInLastCell = tableEl.querySelector('td.lntd:last-child');
            if(genericCodeInLastCell) codeToCopy = genericCodeInLastCell.innerText.trim(); 
        }
      } else { 
        const preCode = highlightWrapper.querySelector('div.highlight > pre.chroma > code, div.highlight > pre > code');
        if (preCode) {
          codeToCopy = preCode.innerText;
        }
      }
      
      if (codeToCopy) {
        navigator.clipboard.writeText(codeToCopy).then(() => {
          const icon = this.querySelector('i');
          const originalTitle = this.title;
          icon.className = 'fas fa-check fa-fw';
          this.title = "Copied!";
          setTimeout(() => {
            icon.className = 'far fa-copy fa-fw';
            this.title = originalTitle;
          }, 2000);
        }).catch(err => {
          this.title = "Failed to copy";
          setTimeout(() => { this.title = "Copy to clipboard"; }, 2000);
        });
      } else {
        this.title = "Nothing to copy";
        setTimeout(() => { this.title = "Copy to clipboard"; }, 2000);
      }
    });
  }

  
  const actualHighlightDivInitial = highlightWrapper ? highlightWrapper.querySelector('div.highlight') : null;
  const arrowIconInitial = toggleArea ? toggleArea.querySelector('.arrow') : null;

  if (currentCodeBlock.classList.contains('open') && highlightWrapper) {
    if (arrowIconInitial) arrowIconInitial.className = 'arrow fas fa-chevron-down fa-fw';
    highlightWrapper.style.display = 'block';
    if (actualHighlightDivInitial) actualHighlightDivInitial.style.visibility = 'visible';
    setTimeout(() => {
        highlightWrapper.style.maxHeight = highlightWrapper.scrollHeight + "px";
    }, 50);
  } else if (highlightWrapper) {
    if (arrowIconInitial) arrowIconInitial.className = 'arrow fas fa-chevron-right fa-fw';
    highlightWrapper.style.maxHeight = '0';
    highlightWrapper.style.display = 'none';
    if (actualHighlightDivInitial) actualHighlightDivInitial.style.visibility = 'hidden';
  }
});
</script> 
</script> 
<p>In the above code we created a python function for uploading the audio file to the gemini. First we pass the <strong>audio file path</strong> in the <code>path</code> argument. And then it upload that audio file to gemini.</p>
<h4 id="getting-the-response">Getting the response</h4>




 








<div class="code-block code-block-custom open">
  <div class="code-header language-python">
    <span class="code-header-left-toggle-area">
      <i class="arrow fas fa-chevron-right fa-fw" aria-hidden="true"></i>
      <span class="lang-name-text">Python</span>
    </span>
    <span class="code-header-right-copy-area">
      <span class="copy" title="Copy to clipboard">
        <i class="far fa-copy fa-fw" aria-hidden="true"></i>
      </span>
    </span>
  </div>
  <div class="highlight-wrapper">
    <div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># create a chat_session and include the file (chat session will be created in each iteration)</span>
</span></span><span style="display:flex;"><span>chat_session <span style="color:#f92672">=</span> model<span style="color:#f92672">.</span>start_chat(
</span></span><span style="display:flex;"><span>  history<span style="color:#f92672">=</span>[
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;role&#34;</span>: <span style="color:#e6db74">&#34;user&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#e6db74">&#34;parts&#34;</span>: [
</span></span><span style="display:flex;"><span>        files[<span style="color:#ae81ff">0</span>],
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># now getting the response back</span>
</span></span><span style="display:flex;"><span>response <span style="color:#f92672">=</span> chat_session<span style="color:#f92672">.</span>send_message(<span style="color:#e6db74">&#34;Please transcribe the audio into bangla text.&#34;</span>)
</span></span><span style="display:flex;"><span>gemini_json_response <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>loads(response<span style="color:#f92672">.</span>text)
</span></span><span style="display:flex;"><span>print(gemini_json_response[<span style="color:#e6db74">&#34;Bangla_transcription_from_audio&#34;</span>])
</span></span></code></pre></td></tr></table>
</div>
</div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  let currentCodeBlock;
  
  if (document.currentScript && document.currentScript.previousElementSibling && document.currentScript.previousElementSibling.classList.contains('code-block-custom')) {
    currentCodeBlock = document.currentScript.previousElementSibling;
  } else {
    
    
    
    const allCustomCodeBlocks = document.querySelectorAll('.code-block-custom:not([data-initialized="true"])');
    if (allCustomCodeBlocks.length > 0) {
        currentCodeBlock = allCustomCodeBlocks[allCustomCodeBlocks.length - 1];
    }
  }

  if (!currentCodeBlock) {
    
    return;
  }
  
  
  if (currentCodeBlock.dataset.initialized === 'true') {
    
    return;
  }
  currentCodeBlock.dataset.initialized = 'true';

  const toggleArea = currentCodeBlock.querySelector('.code-header-left-toggle-area');
  const copyBtn = currentCodeBlock.querySelector('.code-header-right-copy-area .copy');
  const highlightWrapper = currentCodeBlock.querySelector('.highlight-wrapper');

  if (toggleArea && highlightWrapper) {
    const actualHighlightDiv = highlightWrapper.querySelector('div.highlight'); 
    const arrowIcon = toggleArea.querySelector('.arrow'); 

    toggleArea.addEventListener('click', function() {
      currentCodeBlock.classList.toggle('open');

      if (currentCodeBlock.classList.contains('open')) { 
        if (arrowIcon) arrowIcon.className = 'arrow fas fa-chevron-down fa-fw'; 
        highlightWrapper.style.display = 'block';
        if (actualHighlightDiv) actualHighlightDiv.style.visibility = 'visible';

        requestAnimationFrame(() => {
          highlightWrapper.style.maxHeight = highlightWrapper.scrollHeight + "px";
        });
      } else { 
        if (arrowIcon) arrowIcon.className = 'arrow fas fa-chevron-right fa-fw'; 
        if (actualHighlightDiv) actualHighlightDiv.style.visibility = 'hidden'; 
        highlightWrapper.style.maxHeight = '0';

        setTimeout(() => {
          if (!currentCodeBlock.classList.contains('open')) { 
            highlightWrapper.style.display = 'none';
          }
        }, 350); 
      }
    });
  }

  if (copyBtn && highlightWrapper) {
    copyBtn.addEventListener('click', function(e) {
      e.stopPropagation(); 
      
      const tableEl = highlightWrapper.querySelector('div.highlight > pre.chroma > table');
      let codeToCopy = '';

      if (tableEl) { 
        const codeCell = tableEl.querySelector('td.lntd:last-child pre > code');
        if (codeCell) {
          codeToCopy = codeCell.innerText;
        } else { 
            const genericCodeInLastCell = tableEl.querySelector('td.lntd:last-child');
            if(genericCodeInLastCell) codeToCopy = genericCodeInLastCell.innerText.trim(); 
        }
      } else { 
        const preCode = highlightWrapper.querySelector('div.highlight > pre.chroma > code, div.highlight > pre > code');
        if (preCode) {
          codeToCopy = preCode.innerText;
        }
      }
      
      if (codeToCopy) {
        navigator.clipboard.writeText(codeToCopy).then(() => {
          const icon = this.querySelector('i');
          const originalTitle = this.title;
          icon.className = 'fas fa-check fa-fw';
          this.title = "Copied!";
          setTimeout(() => {
            icon.className = 'far fa-copy fa-fw';
            this.title = originalTitle;
          }, 2000);
        }).catch(err => {
          this.title = "Failed to copy";
          setTimeout(() => { this.title = "Copy to clipboard"; }, 2000);
        });
      } else {
        this.title = "Nothing to copy";
        setTimeout(() => { this.title = "Copy to clipboard"; }, 2000);
      }
    });
  }

  
  const actualHighlightDivInitial = highlightWrapper ? highlightWrapper.querySelector('div.highlight') : null;
  const arrowIconInitial = toggleArea ? toggleArea.querySelector('.arrow') : null;

  if (currentCodeBlock.classList.contains('open') && highlightWrapper) {
    if (arrowIconInitial) arrowIconInitial.className = 'arrow fas fa-chevron-down fa-fw';
    highlightWrapper.style.display = 'block';
    if (actualHighlightDivInitial) actualHighlightDivInitial.style.visibility = 'visible';
    setTimeout(() => {
        highlightWrapper.style.maxHeight = highlightWrapper.scrollHeight + "px";
    }, 50);
  } else if (highlightWrapper) {
    if (arrowIconInitial) arrowIconInitial.className = 'arrow fas fa-chevron-right fa-fw';
    highlightWrapper.style.maxHeight = '0';
    highlightWrapper.style.display = 'none';
    if (actualHighlightDivInitial) actualHighlightDivInitial.style.visibility = 'hidden';
  }
});
</script> 
</script> 
<p>In the above code we are doing:</p>
<ol>
<li>First creating a session or think of as a chat history, where we are passing the audio file that we&rsquo;ve already uploaded to the gemini in the previous step. We&rsquo;re just passing <code>files[0]</code> means the first item from the <code>files</code> list.</li>
<li>Then we&rsquo;re sending the message to transcribe the audio using <code>send_message</code> and saving the response to the <code>response</code> variable</li>
<li>Since, the response is in <code>json</code> format therefore I&rsquo;m converting the string (<code>response.text</code> contains the response string) to a json object and saving it to a <code>gemini_json_response</code></li>
<li>Finally we&rsquo;re printing the transcription which is in the <code>Bangla_transcription_from_audio</code> key of json object.</li>
</ol>
<p>That&rsquo;s it we&rsquo;re able to generate <strong>bangla transcribtion from an audio using gemini llm</strong>. Now for my usecase all I did is loop over each audio file and generate transcription and save them to a json file. That&rsquo;s it.</p>
<h2 id="future-work">Future work</h2>
<p><strong>If you&rsquo;ve read this far then I&rsquo;d say dude you&rsquo;ve genuine patience!! I&rsquo;m not a professional writter or something, I write for fun and therefore my writing may sometime feel monotonous. Thank you!</strong> Ok, lets talk about what future improvement you can do if you want to make this project better.</p>
<ol>
<li>
<p><strong>RAG Application:</strong> You can create a complete RAG based chatbot using this transcription. Where the chatbot search for the answer from the transcription itself. I won&rsquo;t go into details of RAG. This in of itself required another blog. I may write a blog on this in future but no promises.</p>
</li>
<li>
<p><strong>Automation Pipeline:</strong> You&rsquo;ve seen that the entire process can be automated. So my suggestion is to create an automation pipeline where an script is monitoring a particular youtube channel and if a new video comes in then it&rsquo;ll automatically trigger the pipeline and transcribe the new video.</p>
</li>
<li>
<p><strong>Package Update:</strong> I had built this project in february &lsquo;25. I had started working before that. Therefore some packages are outdated. Suppose <code>genai</code> package from google. I had used <code>google-generativeai</code> but this package is deprecated and google is migrating to <code>google-genai</code>. So you can migrate this project to latest <code>google-genai</code> package.</p>
</li>
</ol>
<h2 id="gratitude">Gratitude</h2>
<p>This project is a tribute to my sensei <strong>Rakibul Hasan</strong>. I&rsquo;ve started my journey in AI by reading his books in 2019. Now I&rsquo;m working as a professional AI engineer (though jr). I owe him a lot. If you&rsquo;re starting your AI journey (specially deep learning journey) then here are some of his resources I&rsquo;m listing below (all of them are free!)</p>
<ol>
<li><a href="https://rakibul-hassan.gitbook.io/deep-learning" target="_blank" rel="noopener noreffer "><strong>Python Deep Learning from Scracth (Bangla book)</strong></a></li>
<li><a href="https://aiwithr.github.io/nlpbook/" target="_blank" rel="noopener noreffer "><strong>Natuaral Language Processing from Scratch (Bangla book)</strong></a></li>
</ol>
<h2 id="my-next-blog">My Next Blog</h2>
<p>I&rsquo;m going to write about one of my recent project that I&rsquo;ve completed. It is about creating <strong>first bangla reasoning dataset.</strong> Stay tuned!</p></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2025-03-01</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="http://localhost:1313/posts/transcribing-bangla-youtube-video-using-gemini/" data-title="Transcribing Bangla Youtube Video With Gemini" data-via="KillerShoaib__" data-hashtags="STT,LLM"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="http://localhost:1313/posts/transcribing-bangla-youtube-video-using-gemini/" data-hashtag="STT"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="http://localhost:1313/posts/transcribing-bangla-youtube-video-using-gemini/" data-title="Transcribing Bangla Youtube Video With Gemini"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="http://localhost:1313/posts/transcribing-bangla-youtube-video-using-gemini/" data-title="Transcribing Bangla Youtube Video With Gemini"><i data-svg-src="/lib/simple-icons/icons/line.min.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="http://localhost:1313/posts/transcribing-bangla-youtube-video-using-gemini/" data-title="Transcribing Bangla Youtube Video With Gemini" data-image="/images/YoutubeTranscriptionGemini/Bangla Youtube Video Transcription Banner.png"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/stt/">STT</a>,&nbsp;<a href="/tags/llm/">LLM</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/deeplearning/chapter2/" class="prev" rel="prev" title="2. Activation Function Part - 1"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>2. Activation Function Part - 1</a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.147.5">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2022 - 2025</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank"></a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/lightgallery/css/lightgallery-bundle.min.css"><link rel="stylesheet" href="/lib/katex/katex.min.css"><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lightgallery.min.js"></script><script type="text/javascript" src="/lib/lightgallery/plugins/thumbnail/lg-thumbnail.min.js"></script><script type="text/javascript" src="/lib/lightgallery/plugins/zoom/lg-zoom.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js"></script><script type="text/javascript" src="/lib/katex/contrib/auto-render.min.js"></script><script type="text/javascript" src="/lib/katex/contrib/copy-tex.min.js"></script><script type="text/javascript" src="/lib/katex/contrib/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"lightgallery":true,"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
